25) Remove the constraints on Issue table 
26) Insert a record in Issue table. The member_id should not exist in  
member table. 
27) Now enable the constraints of Issue table. Observe the error 
28) Delete the record inserted at Q-27) and enable the constraints. 
29) Try to delete the record of member id 1 from member table and  
observe the error . 
30) View the data and structure of all the three tables Member,  
Issue, Book.


solutions:


25) 

mysql> alter table issue drop primary key;
Query OK, 6 rows affected (0.17 sec)
Records: 6  Duplicates: 0  Warnings: 0

mysql> alter table issue modify lib_issue_id int;
Query OK, 0 rows affected (0.21 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> alter table issue modify issue_date int;
Query OK, 6 rows affected (0.13 sec)
Records: 6  Duplicates: 0  Warnings: 0

mysql> alter table issue drop constraint issue_ibfk_1;
Query OK, 0 rows affected (0.07 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> alter table issue drop constraint issue_ibfk_2;
Query OK, 0 rows affected (0.06 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> show create table issue;
-----------------------------------------------------+
| Table | Create Table                                                                                                                                                                                                                                                                                                                |
+-------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| issue | CREATE TABLE `issue` (
  `lib_issue_id` int DEFAULT NULL,
  `book_no` int DEFAULT NULL,
  `member_id` int DEFAULT NULL,
  `issue_date` int DEFAULT NULL,
  `return_date` date DEFAULT NULL,
  KEY `book_no` (`book_no`),
  KEY `member_id` (`member_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci |
-----------------------------------------------------+
1 row in set (0.00 sec)




Q26)

mysql> insert into issue(lib_issue_id,book_no,member_id,issue_date) values(7010,1022,1000,'06-1-30');
Query OK, 1 row affected (0.02 sec)

mysql> table issue;
+--------------+---------+-----------+------------+-------------+
| lib_issue_id | book_no | member_id | issue_date | return_date |
+--------------+---------+-----------+------------+-------------+
|         7001 |     101 |         1 | 2006-12-10 | NULL        |
|         7002 |     102 |         2 | 2006-12-25 | NULL        |
|         7003 |     104 |         1 | 2006-01-15 | NULL        |
|         7004 |     101 |         1 | 2006-07-04 | NULL        |
|         7005 |     104 |         2 | 2006-11-15 | NULL        |
|         7006 |     101 |         3 | 2006-02-18 | NULL        |
|         7007 |     101 |      NULL | 2006-02-18 | 2006-01-30  |
|         7008 |     101 |      NULL | 2006-02-18 | 2006-01-30  |
|         7009 |     101 |         1 | 2006-02-18 | 2006-01-30  |
|         7010 |    1022 |      1000 | 2006-01-30 | NULL        |
+--------------+---------+-----------+------------+-------------+
10 rows in set (0.00 sec)



Q27)

mysql> alter table issue add constraint primary key(lib_issue_id);
Query OK, 0 rows affected (0.17 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> alter table issue add foreign key(book_no) references books(book_no);
Query OK, 7 rows affected (0.18 sec)
Records: 7  Duplicates: 0  Warnings: 0

mysql> alter table issue add foreign key(member_id) references member(member_id);
ERROR 1452 (23000): Cannot add or update a child row: a foreign key constraint fails (`fbs_mysql_assignment2_librarysystem`.`#sql-1ac4_13`, CONSTRAINT `issue_ibfk_2` FOREIGN KEY (`member_id`) REFERENCES `member` (`member_id`))



Q28)

mysql> delete from issue where lib_issue_id=7010;
Query OK, 1 row affected (0.07 sec)

mysql> alter table issue add foreign key(member_id) references member(member_id);
Query OK, 9 rows affected (0.35 sec)
Records: 9  Duplicates: 0  Warnings: 0



Q29)

mysql> delete from member where member_id=1;
ERROR 1451 (23000): Cannot delete or update a parent row: a foreign key constraint fails (`fbs_mysql_assignment2_librarysystem`.`issue`, CONSTRAINT `issue_ibfk_2` FOREIGN KEY (`member_id`) REFERENCES `member` (`member_id`))



Q30)

mysql> table books;
+---------+-----------------------+---------------+---------+----------+
| book_no | book_name             | author_name   | cost    | category |
+---------+-----------------------+---------------+---------+----------+
|     101 | Let us C              | Denis Ritchie |  450.00 | system   |
|     102 | Oracle - complete Ref | Loni          |  550.00 | database |
|     103 | Mastering SQL         | Loni          |  250.00 | database |
|     104 | PL SQL - Ref          | Scott Urman   |  750.00 | database |
|     105 | Python                | robert son    | 1000.00 | system   |
|     106 | stefen on iland       | stefen hokins |  550.00 | fiction  |
|     107 | Robotics              | Mark Ritchi   |  850.00 | others   |
+---------+-----------------------+---------------+---------+----------+
7 rows in set (0.08 sec)

mysql> table member;
+-----------+--------------+----------------+---------------+-----------------+-----------+-------------------+----------------+
| member_id | member_name  | member_address | acc_open_date | membership_type | fees_paid | max_books_allowed | penalty_amount |
+-----------+--------------+----------------+---------------+-----------------+-----------+-------------------+----------------+
|         1 | Richa Sharma | Pune           | 2005-12-10    | Lifetime        |     25000 |                 5 |          50.00 |
|         2 | Garima Sen   | Pune           | 2026-01-05    | Annual          |      1000 |                 3 |           NULL |
|         3 | Ramesh Pawar | Pune           | 2023-01-10    | Quarterly       |      6000 |                 2 |           NULL |
|         4 | Shivam Gupta | Wagholi        | 2021-03-11    | Quarterly       |      6000 |                 4 |           NULL |
|         5 | Shiva Tiwari | Swargate       | 2020-03-11    | Lifetime        |     25000 |                 5 |           NULL |
|         6 | Mansi Jain   | Pune           | 2020-03-11    | Quarterly       |      6000 |                 1 |         100.00 |
|         7 | Swati Gupta  | Pune           | 2025-02-23    | Quarterly       |      6000 |                 2 |         200.50 |
|         8 | Sapna sharma | Pune           | 2025-02-23    | lifetime        |     25000 |                10 |         100.50 |
+-----------+--------------+----------------+---------------+-----------------+-----------+-------------------+----------------+
8 rows in set (0.04 sec)

mysql> table issue;
+--------------+---------+-----------+------------+-------------+
| lib_issue_id | book_no | member_id | issue_date | return_date |
+--------------+---------+-----------+------------+-------------+
|         7001 |     101 |         1 | 2006-12-10 | NULL        |
|         7002 |     102 |         2 | 2006-12-25 | NULL        |
|         7003 |     104 |         1 | 2006-01-15 | NULL        |
|         7004 |     101 |         1 | 2006-07-04 | NULL        |
|         7005 |     104 |         2 | 2006-11-15 | NULL        |
|         7006 |     101 |         3 | 2006-02-18 | NULL        |
|         7007 |     101 |      NULL | 2006-02-18 | 2006-01-30  |
|         7008 |     101 |      NULL | 2006-02-18 | 2006-01-30  |
|         7009 |     101 |         1 | 2006-02-18 | 2006-01-30  |
+--------------+---------+-----------+------------+-------------+
9 rows in set (0.07 sec)

